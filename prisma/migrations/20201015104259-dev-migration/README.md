# Migration `20201015104259-dev-migration`

This migration has been generated by joswambugu at 10/15/2020, 1:42:59 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Bus" ADD COLUMN "price" integer   NOT NULL 

CREATE TABLE "public"."Transaction" (
"id" SERIAL,
"cart" text   NOT NULL ,
"status" text   NOT NULL ,
"amount" integer   NOT NULL ,
"userId" integer   NOT NULL ,
"createdAt" timestamp(3)   NOT NULL ,
"updatedAt" timestamp(3)   NOT NULL ,
PRIMARY KEY ("id")
)

CREATE UNIQUE INDEX "Transaction.cart_unique" ON "public"."Transaction"("cart")

CREATE UNIQUE INDEX "Transaction.userId_unique" ON "public"."Transaction"("userId")

ALTER TABLE "public"."Transaction" ADD FOREIGN KEY ("userId")REFERENCES "public"."User"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201015093830-dev-migration..20201015104259-dev-migration
--- datamodel.dml
+++ datamodel.dml
@@ -2,9 +2,9 @@
 // learn more about it in the docs: https://pris.ly/d/prisma-schema
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -49,10 +49,10 @@
 updatedAt       DateTime   @updatedAt  
 }
 model Transaction{
-id             String      @id 
-cart           Int       @unique
+id             Int     @id @default(autoincrement())
+cart           String      @unique
 status         String
 amount         Int
 user           User      @relation(fields: [userId],references:[id])
 userId         Int        @unique
```


